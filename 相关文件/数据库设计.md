建表语句：

```sql
-- 1. 创建类别表
CREATE TABLE category (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name VARCHAR(50) NOT NULL,
    create_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- 2. 题目映射表
CREATE TABLE question_map (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    uri VARCHAR(255) NOT NULL,
    title VARCHAR(255),
    category_id INTEGER,
    sort_order INTEGER,    -- 新增排序字段
    content TEXT,          -- 题目内容
    answer TEXT,           -- 题目答案
    create_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (category_id) REFERENCES category(id)
);

-- 3. 用户进度表
CREATE TABLE user_progress (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    question_id INTEGER,
    last_visit_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (question_id) REFERENCES question_map(id)
);

-- 4. 收藏表
CREATE TABLE favorites (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    question_id INTEGER,
    create_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (question_id) REFERENCES question_map(id)
);

-- 5. 创建索引
CREATE INDEX idx_question_category ON question_map(category_id);
CREATE INDEX idx_question_uri ON question_map(uri);
CREATE INDEX idx_question_sort ON question_map(category_id, sort_order);
CREATE INDEX idx_user_progress_question ON user_progress(question_id);
CREATE INDEX idx_favorites_question ON favorites(question_id);
```

### 常用查询语句示例

```sql
-- 获取所有题目类别
SELECT DISTINCT category FROM question_map ORDER BY category;

-- 获取某个类别的所有题目
SELECT * FROM question_map WHERE category = ? ORDER BY id;

-- 获取用户最后访问的题目
SELECT qm.* 
FROM question_map qm
INNER JOIN user_progress up ON qm.id = up.question_id
ORDER BY up.last_visit_time DESC
LIMIT 1;

-- 获取用户收藏的题目
SELECT qm.* 
FROM question_map qm
INNER JOIN favorites f ON qm.id = f.question_id
ORDER BY f.create_time DESC;

-- 获取某个类别的题目总数
SELECT COUNT(*) as total 
FROM question_map 
WHERE category = ?;

-- 获取用户收藏总数
SELECT COUNT(*) as total 
FROM favorites;
```

### 数据插入示例

```sql
-- 插入题目数据
INSERT INTO question_map (uri, title, category, content, answer) 
VALUES 
('https://zha-ge.cn/1', 'Java中的基本数据类型有哪些？', 'Java基础', 
'请列举Java中的基本数据类型及其占用字节数。', 
'Java中有8种基本数据类型：
1. byte: 1字节
2. short: 2字节
3. int: 4字节
4. long: 8字节
5. float: 4字节
6. double: 8字节
7. char: 2字节
8. boolean: 1字节');

-- 更新用户进度
INSERT OR REPLACE INTO user_progress (question_id, last_visit_time)
VALUES (1, CURRENT_TIMESTAMP);

-- 添加收藏
INSERT INTO favorites (question_id)
VALUES (1);
```

这样的数据库结构更加简洁，同时保留了核心功能：
1. 题目内容管理
2. 进度记录
3. 收藏功能
4. 分类管理

需要我详细解释某个部分吗？或者需要其他SQL语句示例？
